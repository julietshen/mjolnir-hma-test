# THIS IS TO BE USED FOR DEVELOPMENT AND TESTING PURPOSES ONLY
version: '3.8'
services:
  synapse_release:
    build:
      context: .
      dockerfile: test/harness/config/docker/Dockerfile.synapse.latest
    ports:
      - "9999:9999"
    volumes:
      - ./test/harness/synapse-data:/data
    env_file:
      - ./test/harness/config/synapse/synapse.env
  synapse_registration:
    build:
      context: .
      dockerfile: test/harness/config/docker/Dockerfile.synapse.registration
    volumes:
      - ./test/harness/synapse-data:/data
    depends_on: [synapse_release]
  mjolnir:
    environment:
      NODE_ENV: development
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8005/tcp"
    volumes:
      - ./config:/data/config
      - ./lib:/mjolnir/lib
    depends_on: [synapse_registration]
